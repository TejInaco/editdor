(()=>{"use strict";let t=new Map;const e="https://w3c.github.io/wot-binding-templates/bindings/protocols/modbus/modbus.schema.json",o="https://w3c.github.io/wot-binding-templates/bindings/protocols/coap/coap.schema.json",s="https://w3c.github.io/wot-binding-templates/bindings/protocols/http/http.schema.json",n="https://w3c.github.io/wot-binding-templates/bindings/protocols/mqtt/mqtt.schema.json";let r;function i(t){if(!t.hasOwnProperty("base"))return[];let i,c=t.base;try{i=new URL(c)}catch(l){return console.error("base url is invalid: ".concat(l)),[]}void 0===r&&function(){const t=new Map;t.set("modbus",e),t.set("modbus+tcp",e),t.set("modbus+udp",e),t.set("coap",o),t.set("coap+tcp",o),t.set("coap+ws",o),t.set("coaps",o),t.set("coaps+tcp",o),t.set("coaps+ws",o),t.set("http",s),t.set("https",s),t.set("mqtt",n),t.set("mqtt+tcp",n),t.set("mqtt+ssl",n),t.set("mqtt+ws",n),r=t}();let a=i.protocol.substring(0,i.protocol.length-1);console.debug("cheking binding schema map for ".concat(a,"..."));let p=r.get(a);return p?[p]:[]}const c=t=>"object"===typeof t&&!Array.isArray(t)&&null!==t&&(!!t.hasOwnProperty("@type")&&t["@type"].indexOf("tm:ThingModel")>-1);let a=new Map;self.onmessage=async e=>{if(!("string"===typeof e.data||e.data instanceof String))return;let o={};try{o=JSON.parse(e.data)}catch(r){return console.debug("ran into error while parsing TD: ".concat(r)),void postMessage(a)}if("object"!==typeof o||o.constructor===Array||!o)return;let s=[c(o)?"https://raw.githubusercontent.com/w3c/wot-thing-description/main/validation/tm-json-schema-validation.json":"https://raw.githubusercontent.com/thingweb/thingweb-playground/%40thing-description-playground/web%401.0.0/packages/playground-core/td-schema.json",...function(t){if(!t)return[];let e=typeof t;if("string"!==e&&t.constructor!==Array)return[];if("string"===e)return[t];let o=[];for(let s=0;s<t.length;s++){let e=t[s];if("object"===typeof e&&!Array.isArray(e)&&null!==e||"string"===typeof e)if("string"!==typeof e)for(const t in e){if(!e.hasOwnProperty(t))continue;let s=e[t];"string"===typeof s&&o.push(s)}else o.push(e)}return o}(o["@context"]),...i(o)];c&&(s=s.filter((t=>"https://www.w3.org/2019/wot/td/v1"!==t)));let n=await async function(e){let o=new Map;for(let s=0;s<e.length;s++){let n=e[s],i=t.get(n);if(void 0===i)try{const t=new URL(n),e=await fetch(t),s=await e.json();o.set(n,s)}catch(r){console.error(r),o.set(n,void 0)}else console.debug("using cached schema for ".concat(n)),o.set(n,i)}return o}(s);!function(e){e.forEach((function(e,o){void 0!==e&&t.set(o,e)}))}(n),a=n,postMessage(n),console.debug("schema worker sent response...")}})();
//# sourceMappingURL=347.b6e869d8.chunk.js.map