(this.webpackJsonpeditdor=this.webpackJsonpeditdor||[]).push([[0],{182:function(e,t,n){},277:function(e,t,n){},284:function(e,t,n){e.exports=n.p+"static/media/editdor.6cac600d.png"},285:function(e,t,n){e.exports=n.p+"static/media/WoT.89768410.png"},290:function(e,t,n){e.exports=n(396)},295:function(e,t,n){},392:function(e){e.exports=JSON.parse('{"https://example.com":"https://example.com/json_schema.json","https://www.w3.org/2019/wot/td/v1":"https://raw.githubusercontent.com/thingweb/thingweb-playground/%40thing-description-playground/web%401.0.0/packages/playground-core/td-schema.json","http://www.w3.org/ns/td":"https://raw.githubusercontent.com/w3c/wot-thing-description/main/validation/tm-json-schema-validation.json"}')},396:function(e,t,n){"use strict";n.r(t);var r=n(7),a=n.n(r),o=n(129),l=n.n(o),c=(n(182),n(295),n(277),n(12)),i=n.n(c),s=n(101),u=n(19),d=a.a.createContext({offlineTD:"",theme:"dark",isModified:!1,isThingModel:void 0,name:"",fileHandle:"",showConvertBtn:!1,linkedTd:{},updateOfflineTD:function(e){},updateIsModified:function(e){},updateIsThingModel:function(e){},setFileHandle:function(e){},removeForm:function(e){},addForm:function(e){},removeLink:function(e){},addActionForm:function(e){},addEventForm:function(e){},removeOneOfAKindReducer:function(e,t){},updateShowConvertBtn:function(e){},addLinkedTd:function(e){},updateLinkedTd:function(e){}}),m=n(6),f=n(93),p=function(e,t,n){for(var r=Object(f.a)({},e),a=0,o=Object.entries(t);a<o.length;a++){var l=Object(u.a)(o[a],2),c=l[0],i=l[1];n.includes(c)||(r[c]=i)}return r},b=function(e){if(void 0===e&&!e)return[];for(var t=[],n=0;n<e.length;n++){var r=e[n];if(Array.isArray(r.op))for(var a=0;a<r.op.length;a++){var o=Object(f.a)({},r);o.op=r.op[a],t.push(o)}else t.push(r)}return t},h=function(e){return!!e.forms},v=function(e){return!!e.links},x=function(e,t){if("string"===typeof t.op){if(t.op===e.op)return!0}else if(t.op.includes(e.op)){var n=!0;for(var r in e)"op"!==r&&t[r]!==e[r]&&(n=!1);if(n)return!0}},g=function(){var e=Object(s.a)(i.a.mark((function e(t,n){var r,a,o,l,c,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("file"!==t.linkedTd[n].kind){e.next=31;break}if(e.prev=1,!t.isModified||!t.fileHandle){e.next=10;break}return e.next=5,t.fileHandle.createWritable();case 5:return r=e.sent,e.next=8,r.write(t.offlineTD);case 8:return e.next=10,r.close();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0.message);case 15:return a=t.linkedTd[n],e.next=18,a.getFile();case 18:return o=e.sent,e.t1=JSON,e.next=22,o.text();case 22:e.t2=e.sent,l=e.t1.parse.call(e.t1,e.t2),c=JSON.stringify(l,null,2),t.setFileHandle(a),t.updateOfflineTD(c),t.updateIsModified(!1),document.getElementById("linkedTd").value=n,e.next=52;break;case 31:if(!Object.keys(t.linkedTd[n]).length){e.next=52;break}if(e.prev=32,!t.isModified||!t.fileHandle){e.next=41;break}return e.next=36,t.fileHandle.createWritable();case 36:return r=e.sent,e.next=39,r.write(t.offlineTD);case 39:return e.next=41,r.close();case 41:e.next=46;break;case 43:e.prev=43,e.t3=e.catch(32),console.error(e.t3.message);case 46:t.setFileHandle(void 0),s=t.linkedTd[n],u=JSON.stringify(s,null,2),t.updateOfflineTD(u),t.updateIsModified(!1),document.getElementById("linkedTd").value=n;case 52:case"end":return e.stop()}}),e,null,[[1,12],[32,43]])})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){return"showOpenFilePicker"in window?window.showOpenFilePicker({types:[{description:"Thing Description",accept:{"application/ld+json":[".jsonld",".json"]}}]}).then((function(e){return e[0]})):window.chooseFileSystemEntries()},w=function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){var n=document.getElementById("fileInput");n.onchange=function(r){var a=n.files[0];return a?e(a):t(new Error("AbortError"))},n.click()})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(e){return new Promise((function(t){var n=new FileReader;n.addEventListener("loadend",(function(e){var n=e.srcElement.result;return t(n)})),n.readAsText(e)}))},k=function(e,t,n){var r,a,o={ar:"rtl",fa:"rtl",ps:"rtl",ur:"rtl",hy:"ltr",as:"ltr",bn:"ltr",zb:"ltr",ab:"ltr",be:"ltr",bg:"ltr",kk:"ltr",mk:"ltr",ru:"ltr",uk:"ltr",hi:"ltr",mr:"ltr",ne:"ltr",ko:"ltr",ma:"ltr",am:"ltr",ti:"ltr",ka:"ltr",el:"ltr",gu:"ltr",pa:"ltr",he:"rtl",iw:"rtl",yi:"rtl",ja:"ltr",km:"ltr",kn:"ltr",lo:"ltr",af:"ltr",ay:"ltr",bs:"ltr",ca:"ltr",ch:"ltr",cs:"ltr",cy:"ltr",da:"ltr",de:"ltr",en:"ltr",eo:"ltr",es:"ltr",et:"ltr",eu:"ltr",fi:"ltr",fj:"ltr",fo:"ltr",fr:"ltr",fy:"ltr",ga:"ltr",gl:"ltr",gn:"ltr",gv:"ltr",hr:"ltr",ht:"ltr",hu:"ltr",id:"ltr",in:"ltr",is:"ltr",it:"ltr",kl:"ltr",la:"ltr",lb:"ltr",ln:"ltr",lt:"ltr",lv:"ltr",mg:"ltr",mh:"ltr",mo:"ltr",ms:"ltr",mt:"ltr",na:"ltr",nb:"ltr",nd:"ltr",nl:"ltr",nn:"ltr",no:"ltr",nr:"ltr",ny:"ltr",om:"ltr",pl:"ltr",pt:"ltr",qu:"ltr",rm:"ltr",rn:"ltr",ro:"ltr",rw:"ltr",sg:"ltr",sk:"ltr",sl:"ltr",sm:"ltr",so:"ltr",sq:"ltr",ss:"ltr",st:"ltr",sv:"ltr",sw:"ltr",tl:"ltr",tn:"ltr",to:"ltr",tr:"ltr",ts:"ltr",ve:"ltr",vi:"ltr",xh:"ltr",zu:"ltr",ds:"ltr",gs:"ltr",hs:"ltr",me:"ltr",ni:"ltr",ns:"ltr",te:"ltr",tk:"ltr",tm:"ltr",tp:"ltr",tv:"ltr",ml:"ltr",my:"ltr",nq:"ltr",or:"ltr",si:"ltr",ta:"ltr",dv:"rtl",th:"ltr",dz:"ltr"},l=function(e){return"ltr"===e?"\u2066":"\u2067"};if(!["title","description"].includes(t)&&!/^[A-Za-z]{2}(-[A-Za-z]{2})?$/.test(t))return l(e[t].toString().getDirection())+e[t];if(/^[A-Za-z]{2}(-[A-Za-z]{2})?$/.test(t)){var c=o[t.includes("-")?t.split("-")[0]:t.toLowerCase()];return c?l(c)+e[t]:l("ltr")+e[t]}if(Array.isArray(n)||(n=[n]),n.forEach((function(e){"object"===typeof e&&(e["@direction"]&&(r=e["@direction"]),e["@language"]&&(a=e["@language"]))})),"title"===t||"description"===t){if(r)return l(r)+e[t];if(a){var i=o[a.includes("-")?a.split("-")[0]:a.toLowerCase()];return i?l(i)+e[t]:l("ltr")+e[t]}}return l(e[t].toString().getDirection())+e[t]},N=function(e){var t,n,r,o,l,c,i,s,u=null!==(t=e.title)&&void 0!==t?t:"Default Title",d=null!==(n=e.description)&&void 0!==n?n:"Default description, please override.",m=null!==(r=e.children)&&void 0!==r?r:a.a.createElement(a.a.Fragment,null),f=null!==(o=e.cancelText)&&void 0!==o?o:"Cancel",p=null!==(l=e.onCancel)&&void 0!==l?l:function(){},b=null!==(c=e.submitText)&&void 0!==c?c:"Submit",h=null!==(i=e.onSubmit)&&void 0!==i?i:function(){},v=null===(s=e.hasSubmit)||void 0===s||s,x={};return window.onkeydown=function(e){x[e.key]=!0,x.Control&&x.Enter&&document.getElementById("submitButton").click()},window.onkeyup=function(e){x[e.key]=!1},a.a.createElement("div",{className:"flex bg-gray-400 bg-opacity-50 w-full h-full absolute top-0 left-0 justify-center items-center z-10 text-white"},a.a.createElement("div",{className:"bg-gray-500 w-1/3 flex flex-col justify-start rounded-xl shadow-xl p-4 max-h-screen"},a.a.createElement("div",{className:"flex flex-row justify-start items-center  "},a.a.createElement("h1",{className:"text-xl font-bold flex-grow pl-2"},u)),a.a.createElement("h2",{className:"text-gray-400 py-2 pl-2"},d),a.a.createElement("div",{className:"overflow-auto p-2"},m),a.a.createElement("div",{className:"flex justify-end pt-4 p-2"},a.a.createElement("button",{className:"text-white bg-gray-500 p-2 mr-1 rounded-md",onClick:function(){p()}},f),v&&a.a.createElement("button",{id:"submitButton",className:"flex text-white bg-blue-500 p-2 rounded-md",onClick:function(){return h()}},b))))},O=Object(r.forwardRef)((function(e,t){var n,o,c,i=Object(r.useContext)(d),s=a.a.useState((function(){return!1})),f=Object(u.a)(s,2),p=f[0],b=f[1],v=null!==(n=e.type)&&void 0!==n?n:"",g=v&&v[0].toUpperCase()+v.slice(1),y=null!==(o=e.interaction)&&void 0!==o?o:{},w=null!==(c=e.interactionName)&&void 0!==c?c:"";Object(r.useEffect)((function(){}),[p,i]),Object(r.useImperativeHandle)(t,(function(){return{openModal:function(){return E()},close:function(){return k()}}}));var E=function(){b(!0)},k=function(){b(!1)},O=function(e){return!!h(y)&&function(e,t){var n,r=Object(m.a)(t.forms);try{for(r.s();!(n=r.n()).done;){var a=n.value;if("string"===typeof e.op)return x(e,a);var o,l=Object(m.a)(e.op);try{for(l.s();!(o=l.n()).done;){var c=o.value;if("string"===typeof a.op){if(a.op===c)return!0}else if(a.op.includes(c)){var i=!0;for(var s in e)"op"!==s&&a[s]!==e[s]&&(i=!1);if(i)return!0}}}catch(u){l.e(u)}finally{l.f()}}}catch(u){r.e(u)}finally{r.f()}return!1}(e,y)},I=D(v),S=a.a.createElement(a.a.Fragment,null,a.a.createElement("label",{className:"text-sm text-gray-400 font-medium pl-3"},"Operations:"),a.a.createElement("div",{className:"p-1"},I),a.a.createElement("div",{className:"p-1 pt-2"},a.a.createElement("label",{htmlFor:"form-href",className:"text-sm text-gray-400 font-medium pl-2"},"Href:"),a.a.createElement("input",{type:"text",name:"form-href",id:"form-href",className:"border-gray-600 bg-gray-600 w-full p-2 sm:text-sm border-2 text-white rounded-md focus:outline-none focus:border-blue-500",placeholder:"http://example.com/href",onChange:function(){j()}}),a.a.createElement("span",{id:"form-href-info",className:"text-xs text-red-400 pl-2"})));return p?l.a.createPortal(a.a.createElement(N,{onCancel:k,onSubmit:function(){var e={};e.op=C(v).map((function(e){return document.getElementById("form-"+e).checked?document.getElementById("form-"+e).value:void 0})).filter((function(e){return void 0!==e}));var t=document.getElementById("form-href").value;e.href=""!==t?t.trim():"/",0===e.op.length?T("You have to select at least one operation ..."):O(e)?T("A Form for one of the selected operations already exists ..."):(!function(e){switch(v){case"property":i.addForm({propName:w,form:e});break;case"action":i.addActionForm({actionName:w,form:e});break;case"event":i.addEventForm({eventName:w,form:e});break;case"thing":var t={};try{t=JSON.parse(i.offlineTD)}catch(n){}h(t)||(t.forms=[]),t.forms.push(e),i.updateOfflineTD(JSON.stringify(t,null,2))}}(e),k())},submitText:"Add",children:S,title:"Add ".concat(g," Form"),description:"Tell us how this ".concat(g," can be interfaced by selecting operations below and providing an href.")}),document.getElementById("modal-root")):null})),T=function(e){document.getElementById("form-href-info").textContent=e,document.getElementById("form-href").classList.remove("border-gray-600"),document.getElementById("form-href").classList.add("border-red-400")},j=function(){document.getElementById("form-href").classList.add("border-gray-600"),document.getElementById("form-href").classList.remove("border-red-400")},C=function(e){switch(e){case"property":return["writeproperty","readproperty","observeproperty","unobserveproperty"];case"event":return["subscribeevent","unsubscribeevent"];case"action":return["invokeaction"];case"thing":return["writeallproperties","readallproperties","writemultipleproperties","readmultipleproperties","observeallproperties","unobserveallproperties"];default:return[]}},D=function(e){return a.a.createElement("div",{className:"bg-gray-600 p-1 rounded-md"},C(e).map((function(e){return I(e)})))},I=function(e){var t="form-".concat(e);return a.a.createElement("div",{key:t,className:"form-checkbox pl-2"},"invokeaction"!==e?a.a.createElement("input",{id:t,className:"form-checkbox-input",type:"checkbox",value:e}):a.a.createElement("input",{id:t,className:"form-checkbox-input",type:"checkbox",value:e,readOnly:"invokeaction"===e,checked:"invokeaction"===e}),a.a.createElement("label",{className:"form-checkbox-label pl-2",htmlFor:t},e))},S="",F={},B={},M=Object(r.forwardRef)((function(e,t){var n,o=Object(r.useContext)(d),c=a.a.useState((function(){return!1})),f=Object(u.a)(c,2),p=f[0],b=f[1],h=a.a.useState((function(){return"url"})),x=Object(u.a)(h,2),g=x[0],k=x[1],O=a.a.useState((function(){return{}})),T=Object(u.a)(O,2),j=T[0],C=T[1],D=null!==(n=e.interaction)&&void 0!==n?n:{};try{B=F,F=JSON.parse(o.offlineTD),S=""}catch(U){S=U.message,console.error(S),F=B}Object(r.useImperativeHandle)(t,(function(){return{openModal:function(){return I()},close:function(){return M()}}}));var I=function(){b(!0)},M=function(){b(!1)},R=function(e){return!!v(D)&&function(e,t){var n,r=Object(m.a)(t.links);try{for(r.s();!(n=r.n()).done;)if(n.value.href===e.href)return!0}catch(a){r.e(a)}finally{r.f()}return!1}(e,D)},J=Object(r.useCallback)((function(){return"chooseFileSystemEntries"in window||"showOpenFilePicker"in window}),[]),P=function(e){k(e),j&&"url"===e&&C({})},W=Object(r.useCallback)((function(e){return e.text?e.text():E(e)}),[]),_=Object(r.useCallback)(function(){var e=Object(s.a)(i.a.mark((function e(t){var n,r,a,o,l,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(J()){e.next=17;break}return e.next=3,w();case 3:if(!(n=e.sent)){e.next=16;break}return document.getElementById("link-href").value="./"+n.name,e.next=8,W(n);case 8:return r=e.sent,e.t0=C,e.t1=JSON,e.next=13,r;case 13:e.t2=e.sent,e.t3=e.t1.parse.call(e.t1,e.t2),(0,e.t0)(e.t3);case 16:return e.abrupt("return");case 17:return e.prev=17,e.next=20,y();case 20:return a=e.sent,e.next=23,a.getFile();case 23:o=e.sent,l="./"+o.name,C(a),document.getElementById("link-href").value=l,e.next=34;break;case 29:e.prev=29,e.t4=e.catch(17),c="We ran into an error trying to open your TD.",console.error(c,e.t4),alert(c);case 34:case"end":return e.stop()}}),e,null,[[17,29]])})));return function(t){return e.apply(this,arguments)}}(),[J,W]),H=function(){var e=0;return["icon","service-doc","alternate","type","tm:extends","proxy-to","collection","item","predecessor-version","controlledBy"].map((function(t){return e++,a.a.createElement("option",{value:t,key:e})}))},z=a.a.createElement(a.a.Fragment,null,a.a.createElement("label",{className:"text-sm text-gray-400 font-medium pl-3"},"Thing Description:"),a.a.createElement("div",{className:"p-1"},F.title),a.a.createElement("div",{className:"p-1 pt-2"},a.a.createElement("label",{htmlFor:"rel",className:"text-sm text-gray-400 font-medium pl-2"},"Relation:(select one of the proposed relations or type your custom relation)"),a.a.createElement("input",{list:"relationType",type:"text",name:"rel",id:"rel",className:"border-gray-600 bg-gray-600 w-full p-2 sm:text-sm border-2 text-white rounded-md focus:outline-none focus:border-blue-500",placeholder:"relation name"}),a.a.createElement("datalist",{id:"relationType"},a.a.createElement(H,null)),a.a.createElement("span",{id:"link-rel-info",className:"text-xs text-red-400 pl-2"})),a.a.createElement("div",{className:"p-1 pt-2"},a.a.createElement("label",{htmlFor:"link-href",className:"text-sm text-gray-400 font-medium pl-2 pr-2"},"Target ressource:"),a.a.createElement("button",{className:"text-white font-bold text-sm bg-blue-500 cursor-pointer rounded-md p-2 h-9",disabled:"upload"===g,onClick:function(){P("upload")}},"From local machine"),a.a.createElement("button",{className:"text-white font-bold text-sm bg-blue-500 cursor-pointer rounded-md p-2 h-9",style:{marginLeft:"2%"},disabled:"url"===g,onClick:function(){P("url")}},"Ressource url"),a.a.createElement("div",{className:"p-1 pt-4"},a.a.createElement("input",{type:"text",name:"link-href",id:"link-href",className:"border-gray-600 bg-gray-600 p-2 sm:text-sm border-2 text-white rounded-md focus:outline-none focus:border-blue-500",placeholder:"The target ressource",onChange:function(){L()},disabled:"url"!==g}),"upload"===g&&a.a.createElement("button",{className:"text-white bg-blue-500 cursor-pointer rounded-md p-2 h-9",onClick:_,disabled:"upload"!==g},"Open TD")),a.a.createElement("span",{id:"link-href-info",className:"text-xs text-red-400 pl-2"}),a.a.createElement("div",null,a.a.createElement("label",{htmlFor:"type",className:"text-sm text-gray-400 font-medium pl-2"},"Type:(select one of the proposed types or tape your custom type)"),a.a.createElement("input",{list:"mediaType",type:"text",name:"type",id:"type",className:"border-gray-600 bg-gray-600 w-full p-2 sm:text-sm border-2 text-white rounded-md focus:outline-none focus:border-blue-500",placeholder:"media type"}),a.a.createElement("datalist",{id:"mediaType"},a.a.createElement("option",{value:"application/td+json"}),a.a.createElement("option",{value:"image/jpeg"}),a.a.createElement("option",{value:"text/csv"}),a.a.createElement("option",{value:"video/mp4"})))));return p?l.a.createPortal(a.a.createElement(N,{onCancel:M,onSubmit:function(){var e={},t={},n=document.getElementById("rel").value,r=document.getElementById("link-href").value,a=document.getElementById("type").value;e.href=""!==r?r.trim():"/";var l=!0;try{var c=new URL(r)}catch(d){l=!1}if("url"!==g||!l||"http:"!==c.protocol&&"https:"!==c.protocol)t[r]=j;else try{var i=new XMLHttpRequest;if(i.open("GET",r,!1),i.send(),i.getResponseHeader("content-type").includes("application/td+json")){var s=i.response,u=JSON.parse(s);t[r]=u}}catch(m){console.error("We ran into an error trying to fetch your TD.",m),t[r]=j}""!==n&&(e.rel=n.trim()),""!==a&&(e.type=a.trim()),""===r?A("The href field is mandatory ..."):R(e)?A("A Link with the target Thing Description already exists ..."):(!function(e){var t={};try{t=JSON.parse(o.offlineTD)}catch(d){}v(t)||(t.links=[]),t.links.push(e),o.updateOfflineTD(JSON.stringify(t,null,2))}(e),o.addLinkedTd(t),C({}),M())},submitText:"Add",children:z,title:"Add Link ",description:"Tell us how this ".concat(F.title," can interact with other ressources")}),document.getElementById("modal-root")):null})),A=function(e){document.getElementById("link-href-info").textContent=e,document.getElementById("link-href").classList.remove("border-gray-600"),document.getElementById("link-href").classList.add("border-red-400")},L=function(){document.getElementById("link-href").classList.add("border-gray-600"),document.getElementById("link-href").classList.remove("border-red-400")},R=n(415),J=n(287),P=function(e){return a.a.createElement("div",{className:"flex flex-row items-center"},a.a.createElement("div",{className:"pr-0.5"},e.children),a.a.createElement("button",{onClick:function(){return window.open(e.tooltip.href,"_blank")}},a.a.createElement(W,{html:e.tooltip.html})),a.a.createElement("div",{className:"p-1"}))},W=function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement(R.a,{color:"grey",size:"16","data-html":!0,"data-type":"info","data-tip":e.html,"data-background-color":"#2c2c2e"}),a.a.createElement(J.a,{html:!0,type:"info"}))},_=n(0),H=function e(t,n){Object(_.a)(this,e),this.html=t,this.href=n},z=function(){return new H("<h2 class='text-lg'>Web of Things Forms</h2>\n                    <p>A Form contains all information needed to make a request to a device.</p>\n                    <p>It can accompany a Property, Action, Event or a Thing itself.</p>\n                    <br />\n                    <p>Click to get more information about Forms.</p>\n                ","https://www.w3.org/TR/wot-thing-description/#form")},U=function(){return new H("<h2 class='text-lg'>Web of Things Link</h2>\n                    <p>A link can be viewed as a statement of the form link context has a relation type resource at link target</p>\n                    <p>Used to link Thing Description with other ressources.</p>\n                    <br />\n                    <p>Click to get more information about Links.</p>\n                ","https://www.w3.org/TR/wot-thing-description/#link")},G={properties:new H("<h2 class='text-lg'>Web of Things Properties</h2>\n                    <p>A Property is a simple attribute of a device. The value of a Property can be readable.</p>\n                    <p>writable or observable. E.g. a Property for a lamp could indicate if it is on or off.</p>\n                    <br />\n                    <p>Click to get more information about Properties.</p> \n                ","https://www.w3.org/TR/wot-thing-description/#propertyaffordance"),actions:new H("<h2 class='text-lg'>Web of Things Actions</h2>\n                    <p>An Action is some kind of procedure that can be triggered on a device. An Action can</p>\n                    <p>be started or cancelled. E.g. an Action for a lamp could be turning it on or off.</p>\n                    <br />\n                    <p>Click to get more information about Actions.</p>\n                ","https://www.w3.org/TR/wot-thing-description/#actionaffordance"),events:new H("<h2 class='text-lg'>Web of Things Events</h2>\n                <p>An Event is an asynchronously happening information flow. An Event is observable.</p>\n                <p>E.g. an Event for a lamp could fire if it gets turned on or off.</p>\n                <br />\n                <p>Click to get more information about Events.</p>\n            ","https://www.w3.org/TR/wot-thing-description/#eventaffordance"),forms:z(),links:U()},K=n(416);function V(e){var t={observeproperty:a.a.createElement(q,{type:"properties",form:e.form,propName:e.propName}),unobserveproperty:a.a.createElement(Y,{type:"properties",form:e.form,propName:e.propName}),observeallproperties:a.a.createElement(Z,{type:"forms",form:e.form,propName:e.propName}),unobserveallproperties:a.a.createElement(X,{type:"forms",form:e.form,propName:e.propName}),readproperty:a.a.createElement($,{type:"properties",form:e.form,propName:e.propName}),readmultipleproperties:a.a.createElement(Q,{type:"forms",form:e.form,formIndex:e.propName}),readallproperties:a.a.createElement(ee,{type:"forms",form:e.form,formIndex:e.propName}),writeproperty:a.a.createElement(te,{type:"properties",form:e.form,propName:e.propName}),writemultipleproperties:a.a.createElement(ne,{type:"forms",form:e.form,formIndex:e.propName}),writeallproperties:a.a.createElement(re,{type:"forms",form:e.form,formIndex:e.propName}),invokeaction:a.a.createElement(ae,{type:"actions",form:e.form,propName:e.propName}),unsubscribeevent:a.a.createElement(Y,{type:"events",form:e.form,propName:e.propName})};return t[e.form.op]?t[e.form.op]:"action"===e.interactionType?a.a.createElement(ae,{type:"actions",form:e.form,propName:e.propName}):"event"===e.interactionType?a.a.createElement(q,{type:"events",form:e.form,propName:e.propName}):a.a.createElement(oe,{form:e.form,propName:e.propName})}function q(e){var t=Object(r.useContext)(d);return a.a.createElement("div",{className:"flex flex-row items-center justify-start h-10 w-full bg-formOrange rounded-md px-4 mt-2 bg-opacity-75 border-2 border-formOrange"},a.a.createElement("div",{className:"flex h-6 w-16 bg-white rounded-md place-self-center justify-center"},a.a.createElement("div",{className:"text-formOrange place-self-center text-center text-xs px-4"},"Observe")),a.a.createElement("div",{className:"place-self-center pl-3 text-base text-white overflow-hidden flex-grow"},e.form.href),a.a.createElement("button",{className:"text-base w-6 h-6 p-1 m-1 shadow-md rounded-full bg-formOrange",onClick:function(){return n=e,void t.removeForm(n);var n}},a.a.createElement(K.a,{size:16,color:"black"})))}function Y(e){var t=Object(r.useContext)(d);return a.a.createElement("div",{className:"flex flex-row items-center justify-start h-10 w-full bg-formRed rounded-md px-4 mt-2 bg-opacity-75 border-2 border-formRed"},a.a.createElement("div",{className:"flex h-6 w-16 bg-white rounded-md place-self-center justify-center"},a.a.createElement("div",{className:"text-formRed place-self-center text-center text-xs px-4"},"Unobserve")),a.a.createElement("div",{className:" place-self-center pl-3 text-base text-white overflow-hidden flex-grow"},e.form.href),a.a.createElement("button",{className:"text-base w-6 h-6 p-1 m-1 shadow-md rounded-full bg-formRed",onClick:function(){return n=e,void t.removeForm(n);var n}},a.a.createElement(K.a,{size:16,color:"black"})))}function Z(e){var t=Object(r.useContext)(d);return a.a.createElement("div",{className:"flex flex-row items-center justify-start h-10 w-full bg-formOrange rounded-md px-4 mt-2 bg-opacity-75 border-2 border-formOrange"},a.a.createElement("div",{className:"flex h-6 w-18 bg-white rounded-md place-self-center justify-center"},a.a.createElement("div",{className:"text-formOrange place-self-center text-center text-xs px-4"},"ObserveAll")),a.a.createElement("div",{className:"place-self-center pl-3 text-base text-white overflow-hidden flex-grow"},e.form.href),a.a.createElement("button",{className:"text-base w-6 h-6 p-1 m-1 shadow-md rounded-full bg-formOrange",onClick:function(){return n=e,void t.removeForm(n);var n}},a.a.createElement(K.a,{size:16,color:"black"})))}function X(e){var t=Object(r.useContext)(d);return a.a.createElement("div",{className:"flex flex-row items-center justify-start h-10 w-full bg-formRed rounded-md px-4 mt-2 bg-opacity-75 border-2 border-formRed"},a.a.createElement("div",{className:"flex h-6 w-18 bg-white rounded-md place-self-center justify-center"},a.a.createElement("div",{className:"text-formRed place-self-center text-center text-xs px-4"},"UnobserveAll")),a.a.createElement("div",{className:" place-self-center pl-3 text-base text-white overflow-hidden flex-grow"},e.form.href),a.a.createElement("button",{className:"text-base w-6 h-6 p-1 m-1 shadow-md rounded-full bg-formRed",onClick:function(){return n=e,void t.removeForm(n);var n}},a.a.createElement(K.a,{size:16,color:"black"})))}function $(e){var t=Object(r.useContext)(d);return a.a.createElement("div",{className:"flex flex-row items-center justify-start h-10 w-full bg-formGreen rounded-md px-4 mt-2 bg-opacity-75 border-2 border-formGreen"},a.a.createElement("div",{className:"flex h-6 w-16 bg-white rounded-md place-self-center justify-center"},a.a.createElement("div",{className:"text-formGreen place-self-center text-center text-xs px-4"},"Read")),a.a.createElement("div",{className:" place-self-center pl-3 text-base text-white overflow-hidden flex-grow"},e.form.href),a.a.createElement("button",{className:"text-base w-6 h-6 p-1 m-1 shadow-md rounded-full bg-formGreen",onClick:function(){return n=e,void t.removeForm(n);var n}},a.a.createElement(K.a,{size:16,color:"black"})))}function Q(e){var t=Object(r.useContext)(d);return a.a.createElement("div",{className:"flex flex-row items-center justify-start h-10 w-full bg-formGreen rounded-md px-4 mt-2 bg-opacity-75 border-2 border-formGreen"},a.a.createElement("div",{className:"flex h-6 w-18 bg-white rounded-md place-self-center justify-center"},a.a.createElement("div",{className:"text-formGreen place-self-center text-center text-xs px-4"},"ReadMultiple")),a.a.createElement("div",{className:" place-self-center pl-3 text-base text-white overflow-hidden flex-grow"},e.form.href),a.a.createElement("button",{className:"text-base w-6 h-6 p-1 m-1 shadow-md rounded-full bg-formGreen",onClick:function(){return n=e,void t.removeForm(n);var n}},a.a.createElement(K.a,{size:16,color:"black"})))}function ee(e){var t=Object(r.useContext)(d);return a.a.createElement("div",{className:"flex flex-row items-center justify-start h-10 w-full bg-formGreen rounded-md px-4 mt-2 bg-opacity-75 border-2 border-formGreen"},a.a.createElement("div",{className:"flex h-6 w-18 bg-white rounded-md place-self-center justify-center"},a.a.createElement("div",{className:"text-formGreen place-self-center text-center text-xs px-4"},"ReadAll")),a.a.createElement("div",{className:" place-self-center pl-3 text-base text-white overflow-hidden flex-grow"},e.form.href),a.a.createElement("button",{className:"text-base w-6 h-6 p-1 m-1 shadow-md rounded-full bg-formGreen",onClick:function(){return n=e,void t.removeForm(n);var n}},a.a.createElement(K.a,{size:16,color:"black"})))}function te(e){var t=Object(r.useContext)(d);return a.a.createElement("div",{className:"flex flex-row items-center justify-start h-10 w-full bg-formBlue rounded-md px-4 mt-2 bg-opacity-75 border-2 border-formBlue"},a.a.createElement("div",{className:"flex h-6 w-16 bg-white rounded-md place-self-center justify-center"},a.a.createElement("div",{className:"text-formBlue place-self-center text-center text-xs px-4"},"Write")),a.a.createElement("div",{className:" place-self-center pl-3 text-base text-white overflow-hidden flex-grow"},e.form.href),a.a.createElement("button",{className:"text-base w-6 h-6 p-1 m-1 shadow-md rounded-full bg-formBlue",onClick:function(){return n=e,void t.removeForm(n);var n}},a.a.createElement(K.a,{size:16,color:"black"})))}function ne(e){var t=Object(r.useContext)(d);return a.a.createElement("div",{className:"flex flex-row items-center justify-start h-10 w-full bg-formBlue rounded-md px-4 mt-2 bg-opacity-75 border-2 border-formBlue"},a.a.createElement("div",{className:"flex h-6 w-18 bg-white rounded-md place-self-center justify-center"},a.a.createElement("div",{className:"text-formBlue place-self-center text-center text-xs px-4"},"WriteMultiple")),a.a.createElement("div",{className:" place-self-center pl-3 text-base text-white overflow-hidden flex-grow"},e.form.href),a.a.createElement("button",{className:"text-base w-6 h-6 p-1 m-1 shadow-md rounded-full bg-formBlue",onClick:function(){return n=e,void t.removeForm(n);var n}},a.a.createElement(K.a,{size:16,color:"black"})))}function re(e){var t=Object(r.useContext)(d);return a.a.createElement("div",{className:"flex flex-row items-center justify-start h-10 w-full bg-formBlue rounded-md px-4 mt-2 bg-opacity-75 border-2 border-formBlue"},a.a.createElement("div",{className:"flex h-6 w-18 bg-white rounded-md place-self-center justify-center"},a.a.createElement("div",{className:"text-formBlue place-self-center text-center text-xs px-4"},"WriteAll")),a.a.createElement("div",{className:" place-self-center pl-3 text-base text-white overflow-hidden flex-grow"},e.form.href),a.a.createElement("button",{className:"text-base w-6 h-6 p-1 m-1 shadow-md rounded-full bg-formBlue",onClick:function(){return n=e,void t.removeForm(n);var n}},a.a.createElement(K.a,{size:16,color:"black"})))}function ae(e){var t=Object(r.useContext)(d);return a.a.createElement("div",{className:"flex flex-row items-center justify-start h-10 w-full bg-formRed rounded-md px-4 mt-2 bg-opacity-75 border-2 border-formRed"},a.a.createElement("div",{className:"flex h-6 w-16 bg-white rounded-md place-self-center justify-center"},a.a.createElement("div",{className:"text-formRed place-self-center text-center text-xs px-4"},"Invoke")),a.a.createElement("div",{className:" place-self-center pl-3 text-base text-white overflow-hidden flex-grow"},e.form.href),a.a.createElement("button",{className:"text-base w-6 h-6 p-1 m-1 shadow-md rounded-full bg-formRed",onClick:function(){return n=e,void t.removeForm(n);var n}},a.a.createElement(K.a,{size:16,color:"black"})))}function oe(e){var t=Object(r.useContext)(d);return a.a.createElement("div",{className:"flex flex-row items-center justify-start h-10 w-full bg-gray-300 rounded-md px-4 mt-2 bg-opacity-75 border-2 border-gray-300"},a.a.createElement("div",{className:"flex h-6 w-16 bg-white rounded-md place-self-center justify-center"},a.a.createElement("div",{className:"place-self-center text-center text-xs px-4"},"Undefined")),a.a.createElement("div",{className:" place-self-center pl-3 text-base overflow-hidden flex-grow"},e.form.href),a.a.createElement("button",{className:"text-base w-6 h-6 p-1 m-1 shadow-md rounded-full bg-white",onClick:function(){return n=e,void t.removeForm(n);var n}},a.a.createElement(K.a,{size:16,color:"black"})))}function le(e){var t=Object(r.useContext)(d),n=function(){var e=Object(s.a)(i.a.mark((function e(n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.link.href,g(t,r);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a.a.createElement("div",{className:"flex flex-row items-center justify-start h-10 w-full bg-formBlue rounded-md px-4 mt-2 bg-opacity-75 border-2 border-formBlue"},a.a.createElement("div",{className:"flex h-6 w-18 bg-white rounded-md place-self-center justify-center"},e.link.rel&&a.a.createElement("div",{className:"text-formBlue place-self-center text-center text-xs px-4"},e.link.rel)),a.a.createElement("div",{className:" place-self-center pl-3 text-base text-white overflow-hidden flex-grow"},e.link.href),a.a.createElement("button",{className:"text-base w-6 h-6 p-1 m-1 shadow-md rounded-full bg-formBlue",onClick:function(){return function(e){var n=t.linkedTd;n[e.link.href]&&(delete n[e.link.href],t.updateLinkedTd(n)),t.removeLink(e.propName),t.updateIsModified(!0)}(e)}},a.a.createElement(K.a,{size:16,color:"black"})),t.linkedTd&&t.linkedTd[e.link.href]&&(Object.keys(t.linkedTd[e.link.href]).length||"file"===t.linkedTd[e.link.href].kind)&&a.a.createElement("button",{className:"text-base w-6 h-6 p-1 m-1 shadow-md rounded-full bg-formBlue",onClick:function(){return n(e)}},a.a.createElement(R.a,{size:16,color:"black"})))}var ce=n(417),ie=function(e){var t,n;return a.a.createElement("div",{key:e.id,className:"py-1"},a.a.createElement("label",{htmlFor:e.id,className:"text-sm text-gray-400 font-medium pl-2"},e.label,":"),a.a.createElement("input",{name:e.id,id:e.id,className:"border-gray-600 bg-gray-600 w-full p-2 sm:text-sm border-2 text-white rounded-md focus:outline-none focus:border-blue-500",placeholder:e.placeholder,type:null!==(t=e.type)&&void 0!==t?t:"text",autoFocus:null!==(n=e.autoFocus)&&void 0!==n&&n,onChange:e.onChange?function(){return e.onChange()}:null}),a.a.createElement("span",{id:"".concat(e.id,"-helper-text"),className:"text-xs text-red-400 pl-2"}))},se=function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement("label",{htmlFor:e.id,className:"text-sm text-gray-400 font-medium pl-2"},e.label,":"),a.a.createElement("textarea",{id:e.id,rows:"5",className:"bg-gray-600 sm:text-sm appearance-none  border-2 border-gray-600 rounded w-full  p-2 text-white  leading-tight  focus:outline-none  focus:border-blue-500",placeholder:e.placeholder}))},ue=function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement("label",{htmlFor:e.id,className:"text-sm text-gray-400 font-medium pl-2"},e.label,":"),a.a.createElement("div",{className:"relative"},a.a.createElement("select",{className:"block appearance-none w-full bg-gray-600 border-2 border-gray-600 text-white py-3 px-4 pr-8 rounded leading-tight focus:border-blue-500 focus:outline-none",id:e.id},e.options.map((function(e){return a.a.createElement("option",{key:e},e)}))),a.a.createElement("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},a.a.createElement(ce.a,{color:"#cacaca"}))))},de=function(e){var t;return a.a.createElement("div",{key:e.id,className:"form-checkbox pl-2"},null===(t=e.readOnly)||void 0===t||t?a.a.createElement("input",{id:e.id,className:"form-checkbox-input",type:"checkbox",value:e.label}):a.a.createElement("input",{id:e.id,className:"form-checkbox-input",type:"checkbox",value:e.label,readOnly:e.readOnly,checked:!0}),a.a.createElement("label",{className:"form-checkbox-label pl-2",htmlFor:e.id},e.label))},me=Object(r.forwardRef)((function(e,t){var n=Object(r.useContext)(d),o=a.a.useState((function(){return!1})),c=Object(u.a)(o,2),i=c[0],s=c[1],m="action",f="actions",p=m[0].toUpperCase()+m.slice(1);Object(r.useEffect)((function(){}),[i,n]),Object(r.useImperativeHandle)(t,(function(){return{openModal:function(){return b()},close:function(){return h()}}}));var b=function(){s(!0)},h=function(){s(!1)},v=a.a.createElement(a.a.Fragment,null,a.a.createElement(ie,{id:"".concat(m,"-title"),label:"Title",placeholder:"".concat(p," Title"),autoFocus:!0,onChange:function(){return y()}}),a.a.createElement(se,{id:"".concat(m,"-description"),label:"Description",placeholder:"A short description about the new ".concat(p,"...")})),x=function(e){var t=JSON.parse(n.offlineTD);t[f]||(t[f]={}),t[f][e.title]=e,n.updateOfflineTD(JSON.stringify(t,null,2))},g=function(e){document.getElementById("".concat(m,"-title-helper-text")).textContent=e,document.getElementById("".concat(m,"-title")).classList.remove("border-gray-600"),document.getElementById("".concat(m,"-title")).classList.add("border-red-400")},y=function(){document.getElementById("".concat(m,"-title-helper-text")).textContent="",document.getElementById("".concat(m,"-title")).classList.add("border-gray-600"),document.getElementById("".concat(m,"-title")).classList.remove("border-red-400")};return i?l.a.createPortal(a.a.createElement(N,{onCancel:h,onSubmit:function(){!function(){var e={};e.title=document.getElementById("".concat(m,"-title")).value;var t=document.getElementById("".concat(m,"-description")).value;""!==t&&(e.description=t),e.forms=[];var r=JSON.parse(n.offlineTD);r[f]&&r[f][e.title]?g("An ".concat(p," with this title already exists...")):(x(e),h())}()},submitText:"Add ".concat(p),children:v,title:"Add New ".concat(p),description:"Tell us a little something about the ".concat(p," you want to add.")}),document.getElementById("modal-root")):null})),fe=Object(r.forwardRef)((function(e,t){var n=Object(r.useContext)(d),o=a.a.useState((function(){return!1})),c=Object(u.a)(o,2),i=c[0],s=c[1],m="event",f="events",p=m[0].toUpperCase()+m.slice(1);Object(r.useEffect)((function(){}),[i,n]),Object(r.useImperativeHandle)(t,(function(){return{openModal:function(){return b()},close:function(){return h()}}}));var b=function(){s(!0)},h=function(){s(!1)},v=a.a.createElement(a.a.Fragment,null,a.a.createElement(ie,{id:"".concat(m,"-title"),label:"Title",placeholder:"".concat(p," Title"),autoFocus:!0,onChange:function(){return y()}}),a.a.createElement(se,{id:"".concat(m,"-description"),label:"Description",placeholder:"A short description about the new ".concat(p,"...")})),x=function(e){var t=JSON.parse(n.offlineTD);t[f]||(t[f]={}),t[f][e.title]=e,n.updateOfflineTD(JSON.stringify(t,null,2))},g=function(e){document.getElementById("".concat(m,"-title-helper-text")).textContent=e,document.getElementById("".concat(m,"-title")).classList.remove("border-gray-600"),document.getElementById("".concat(m,"-title")).classList.add("border-red-400")},y=function(){document.getElementById("".concat(m,"-title-helper-text")).textContent="",document.getElementById("".concat(m,"-title")).classList.add("border-gray-600"),document.getElementById("".concat(m,"-title")).classList.remove("border-red-400")};return i?l.a.createPortal(a.a.createElement(N,{onCancel:h,onSubmit:function(){!function(){var e={};e.title=document.getElementById("".concat(m,"-title")).value;var t=document.getElementById("".concat(m,"-description")).value;""!==t&&(e.description=t),e.forms=[];var r=JSON.parse(n.offlineTD);r[f]&&r[f][e.title]?g("An ".concat(p," with this title already exists...")):(x(e),h())}()},submitText:"Add ".concat(p),children:v,title:"Add New ".concat(p),description:"Tell us a little something about the ".concat(p," you want to add.")}),document.getElementById("modal-root")):null})),pe="undefined",be=Object(r.forwardRef)((function(e,t){var n=Object(r.useContext)(d),o=a.a.useState((function(){return!1})),c=Object(u.a)(o,2),i=c[0],s=c[1],m="property",f="properties",p=m[0].toUpperCase()+m.slice(1);Object(r.useEffect)((function(){}),[i,n]),Object(r.useImperativeHandle)(t,(function(){return{openModal:function(){return b()},close:function(){return h()}}}));var b=function(){s(!0)},h=function(){s(!1)},v=a.a.createElement(a.a.Fragment,null,a.a.createElement(ie,{id:"".concat(m,"-title"),label:"Title",placeholder:"".concat(p," Title"),autoFocus:!0,onChange:function(){return y()}}),a.a.createElement(se,{id:"".concat(m,"-description"),label:"Description",placeholder:"A short description about the new ".concat(p,"...")}),a.a.createElement(ue,{id:"".concat(m,"-type"),label:"Type",options:[pe,"number","integer","boolean","string","object","array"]}),a.a.createElement("div",{className:"h-2"}),a.a.createElement("label",{className:"text-sm text-gray-400 font-medium pl-3"},"Additional:"),a.a.createElement("div",{id:"additional",className:"bg-gray-600 p-1 rounded-md"},a.a.createElement(de,{id:"".concat(m,"-readOnly"),label:"Read Only"}),a.a.createElement(de,{id:"".concat(m,"-observable"),label:"Observable"}))),x=function(e){var t=JSON.parse(n.offlineTD);t[f]||(t[f]={}),t[f][e.title]=e,n.updateOfflineTD(JSON.stringify(t,null,2))},g=function(e){document.getElementById("".concat(m,"-title-helper-text")).textContent=e,document.getElementById("".concat(m,"-title")).classList.remove("border-gray-600"),document.getElementById("".concat(m,"-title")).classList.add("border-red-400")},y=function(){document.getElementById("".concat(m,"-title-helper-text")).textContent="",document.getElementById("".concat(m,"-title")).classList.add("border-gray-600"),document.getElementById("".concat(m,"-title")).classList.remove("border-red-400")};return i?l.a.createPortal(a.a.createElement(N,{onCancel:h,onSubmit:function(){!function(){var e={};e.title=document.getElementById("".concat(m,"-title")).value,e.observable=document.getElementById("".concat(m,"-observable")).checked,e.readOnly=document.getElementById("".concat(m,"-readOnly")).checked;var t=document.getElementById("".concat(m,"-description")).value;""!==t&&(e.description=t);var r=document.getElementById("".concat(m,"-type")).value;r!==pe&&(e.type=r),"array"===r?e.items={}:"object"===r&&(e.properties={}),e.forms=[];var a=JSON.parse(n.offlineTD);a[f]&&a[f][e.title]?g("A ".concat(p," with this title already exists...")):(x(e),h())}()},submitText:"Add ".concat(p),children:v,title:"Add New ".concat(p),description:"Tell us a little something about the ".concat(p," you want to add.")}),document.getElementById("modal-root")):null})),he=n(418),ve=["title","forms","description"];function xe(e){var t,n=Object(r.useContext)(d),o=a.a.useRef();if(0===Object.keys(e.action).length&&e.action.constructor!==Object)return a.a.createElement("div",{className:"text-3xl text-white"},"Action could not be rendered because mandatory fields are missing.");var l=e.action,c=b(e.action.forms),i=p({name:e.actionName},e.action,ve),s=Object.keys(i).map((function(e){return a.a.createElement("li",{key:e},e," : ",JSON.stringify(i[e]))}));return a.a.createElement("details",null,a.a.createElement("summary",{className:"text-xl text-gray-400 flex flex-row justify-start items-center cursor-pointer p-0.5"},a.a.createElement("div",{className:"flex-grow"},null!==(t=l.title)&&void 0!==t?t:e.actionName),a.a.createElement("button",{className:"text-base w-6 h-6 p-1 m-1 rounded-full bg-gray-400",onClick:function(){n.removeOneOfAKindReducer("actions",e.actionName)}},a.a.createElement(K.a,{size:16,color:"black"}))),a.a.createElement("div",{className:"mb-4"},a.a.createElement("div",{className:"text-lg text-gray-400 pb-2"},l.description),a.a.createElement("ul",{className:"text-base text-gray-300 list-disc pl-8"},s),a.a.createElement("div",{className:"flex flex-row items-center "},a.a.createElement("div",{className:"flex flex-grow"},a.a.createElement(P,{className:" flex-grow",tooltip:z()},a.a.createElement("h4",{className:"text-lg text-gray-400 pr-1 text-bold"},"Forms"))),a.a.createElement("button",{onClick:function(){o.current.openModal()}},a.a.createElement(he.a,{color:"#cacaca",size:"18"})),a.a.createElement(O,{type:"action",interaction:l,interactionName:e.actionName,ref:o})),c.map((function(t,n){return a.a.createElement(V,{key:n,form:t,propName:e.actionName,interactionType:"action"})}))))}var ge=["title","forms","description"];function ye(e){var t,n=Object(r.useContext)(d),o=a.a.useRef();if(0===Object.keys(e.event).length&&e.event.constructor!==Object)return a.a.createElement("div",{className:"text-3xl text-white"},"Event could not be rendered because mandatory fields are missing.");var l=e.event,c=b(e.event.forms),i=p({name:e.eventName},e.event,ge),s=Object.keys(i).map((function(e){return a.a.createElement("li",{key:e},e," : ",JSON.stringify(i[e]))}));return a.a.createElement("details",null,a.a.createElement("summary",{className:"text-xl text-gray-400 flex flex-row justify-start items-center cursor-pointer p-0.5"},a.a.createElement("div",{className:"flex-grow"},null!==(t=l.title)&&void 0!==t?t:e.eventName),a.a.createElement("button",{className:"text-base w-6 h-6 p-1 m-1 rounded-full bg-gray-400",onClick:function(){n.removeOneOfAKindReducer("events",e.eventName)}},a.a.createElement(K.a,{size:16,color:"black"}))),a.a.createElement("div",{className:"mb-4"},a.a.createElement("div",{className:"text-lg text-gray-400 pb-2"},l.description),a.a.createElement("ul",{className:"text-base text-gray-300 list-disc pl-8"},s),a.a.createElement("div",{className:"flex flex-row items-center "},a.a.createElement("div",{className:"flex flex-grow"},a.a.createElement(P,{className:" flex-grow",tooltip:z()},a.a.createElement("h4",{className:"text-lg text-gray-400 pr-1 text-bold"},"Forms"))),a.a.createElement("button",{onClick:function(){o.current.openModal()}},a.a.createElement(he.a,{color:"#cacaca",size:"18"})),a.a.createElement(O,{type:"event",interaction:l,interactionName:e.eventName,ref:o})),c.map((function(t,n){return a.a.createElement(V,{key:n,form:t,propName:e.eventName,interactionType:"event"})}))))}var we=["title","forms","description"];function Ee(e){var t,n=Object(r.useContext)(d),o=a.a.useRef();if(0===Object.keys(e.prop).length&&e.prop.constructor!==Object)return a.a.createElement("div",{className:"text-3xl text-white"},"Property could not be rendered because mandatory fields are missing.");var l=e.prop,c=b(e.prop.forms),i=p({name:e.propName},e.prop,we),s=Object.keys(i).map((function(e){return a.a.createElement("li",{key:e},e," : ",JSON.stringify(i[e]))}));return a.a.createElement("details",null,a.a.createElement("summary",{className:"text-xl text-gray-400 flex flex-row w-full justify-start items-center cursor-pointer p-0.5"},a.a.createElement("h3",{className:"flex-grow"},null!==(t=l.title)&&void 0!==t?t:e.propName),a.a.createElement("button",{className:"text-base w-6 h-6 p-1 m-1 rounded-full bg-gray-400",onClick:function(){n.removeOneOfAKindReducer("properties",e.propName)}},a.a.createElement(K.a,{size:16,color:"black"}))),a.a.createElement("div",{className:"mb-4"},a.a.createElement("div",{className:"text-lg text-gray-400 pb-2"},l.description),a.a.createElement("ul",{className:"list-disc text-base text-gray-300 pl-8"},s),a.a.createElement("div",{className:"flex justify-start items-center pt-2"},a.a.createElement("div",{className:"flex flex-grow"},a.a.createElement(P,{className:" flex-grow",tooltip:z()},a.a.createElement("h4",{className:"text-lg text-gray-400 pr-1 text-bold"},"Forms"))),a.a.createElement("button",{onClick:function(){o.current.openModal()}},a.a.createElement(he.a,{color:"#cacaca",size:"18"})),a.a.createElement(O,{type:"property",interaction:l,interactionName:e.propName,ref:o})),c.map((function(t,n){return a.a.createElement(V,{key:n,propName:e.propName,form:t,interactionType:"property",className:"last:pb-4"})}))))}var ke=n(419),Ne=function(e){return a.a.createElement("div",{className:"relative text-gray-600"},a.a.createElement("input",{type:"search",autoComplete:"on",className:"caret-gray bg-gray-600 text-white px-5 pr-10 place-self-center rounded-lg text-sm focus:outline-none h-9",onKeyUp:e.onKeyUp,placeholder:e.placeholder,"aria-label":e.ariaLabel}),a.a.createElement("div",{disabled:!0,type:"submit",className:"cursor-default absolute right-0 top-0 mt-1 mr-4"},a.a.createElement(ke.a,{color:"#2c2c2e"})))},Oe="asc",Te={},je={},Ce=function(e){var t=Object(r.useState)(""),n=Object(u.a)(t,2),o=n[0],l=n[1],c=Object(r.useState)(Oe),i=Object(u.a)(c,2),s=i[0],m=i[1],f=e.interaction.toLowerCase(),p=Object(r.useContext)(d);try{je=Te;var b=JSON.parse(p.offlineTD);Te=b}catch(g){Te=je}var h,v=function(){var e=function(){if(Te[f]){var e={};return Object.keys(Te[f]).filter((function(e){return e.toLowerCase().indexOf(o.toLowerCase())>-1})).forEach((function(t){e[t]=Te[f][t]})),e}}();return Te.properties&&"properties"===f?Object.keys(e).map((function(t,n){return a.a.createElement(Ee,{prop:e[t],propName:t,key:n})})):Te.actions&&"actions"===f?Object.keys(e).map((function(t,n){return a.a.createElement(xe,{action:e[t],actionName:t,key:n})})):Te.events&&"events"===f?Object.keys(e).map((function(t,n){return a.a.createElement(ye,{event:e[t],eventName:t,key:n})})):void 0},x=a.a.useRef();switch(f){case"properties":h=a.a.createElement(be,{ref:x});break;case"actions":h=a.a.createElement(me,{ref:x});break;case"events":h=a.a.createElement(fe,{ref:x})}return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"flex justify-start items-end pt-8 pb-4"},a.a.createElement("div",{className:"flex flex-grow"},a.a.createElement(P,{tooltip:G[f]},a.a.createElement("h2",{className:"text-2xl text-white pr-1 flex-grow"},e.interaction))),a.a.createElement(Ne,{onKeyUp:function(e){return l(e.target.value)},placeholder:"Search ".concat(e.interaction),ariaLabel:"Search through all ".concat(e.interaction)}),a.a.createElement("div",{className:"w-2"}),a.a.createElement("button",{className:"text-white bg-blue-500 cursor-pointer rounded-md p-2 h-9",onClick:function(){return function(e){if(Te[e]){var t={},n=Object.keys(Te[e]).map((function(t){return{key:t,title:Te[e][t].title}}));s===Oe?(n.sort((function(e,t){var n=e.title?e.title:e.key,r=t.title?t.title:t.key;return n.localeCompare(r)})).forEach((function(n){t[n.key]=Te[e][n.key]})),m("desc")):(n.sort((function(e,t){var n=e.title?e.title:e.key,r=t.title?t.title:t.key;return n.localeCompare(r)})).reverse().forEach((function(n){t[n.key]=Te[e][n.key]})),m(Oe)),Te[e]=t,p.updateOfflineTD(JSON.stringify(Te,null,2))}}(f)}},s===Oe?a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"#ffffff",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a.a.createElement("path",{d:"M11 5h10M11 9h7M11 13h4M3 17l3 3 3-3M6 18V4"})):a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"#ffffff",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a.a.createElement("path",{d:"M11 5h4M11 9h7M11 13h10M3 17l3 3 3-3M6 18V4"}))),a.a.createElement("div",{className:"w-2"}),a.a.createElement("button",{className:"text-white font-bold text-sm bg-blue-500 cursor-pointer rounded-md p-2 h-9",onClick:function(){x.current.openModal()}},"Add"),h),v()&&a.a.createElement("div",{className:"rounded-lg bg-gray-600 px-6 pt-4 pb-4"},v()))},De=n(22),Ie=n(420);var Se=function e(t){var n=Object(r.useContext)(d),o=Object(r.useState)(new Array(Object.entries(t).length)),l=Object(u.a)(o,2),c=l[0],i=l[1],s=Object(r.useCallback)((function(e){var t=c,n=c[e];t[e]=null===n||!n,i(Object(De.a)(t))}),[c,i]);return a.a.createElement(a.a.Fragment,null,Object.entries(t).map((function(r,o){var l,i=Object(u.a)(r,2),d=i[0],m=i[1];if(null!==(l=m)&&("function"===typeof l||"object"===typeof l)){var f,p=a.a.createElement("button",{className:"flex align-top",onClick:function(){return s(o)}},a.a.createElement("div",{className:"flex text-white font-bold bg-gray-600 py-1 px-2 rounded-md align-middle"},a.a.createElement("h4",null,d),!0===c[o]?a.a.createElement(ce.a,{className:"pl-1"}):a.a.createElement(Ie.a,{className:"pl-1"}))),b=a.a.createElement("div",{className:"flex"},a.a.createElement("div",{className:"flex w-1 rounded-lg bg-gray-400 ml-2 my-1"}),a.a.createElement("div",{className:"pl-8 mt-1"},!0===c[o]&&(null!==(f=Object.entries(m))&&void 0!==f?f:[]).map((function(t,n){var r=Object(u.a)(t,2),o=r[0],l=r[1],c={};return c[o]=l,a.a.createElement(e,Object.assign({},c,{key:n}))}))));return a.a.createElement("div",{className:"mb-1",key:o},p,!0===c[o]&&b)}var h=k(t,d,n.linkedTd[Object.keys(n.linkedTd)[0]]["@context"]);return a.a.createElement("div",{className:"flex mb-1",key:o},a.a.createElement("h4",{className:"text-white font-bold bg-gray-600 py-1 px-2 rounded-md"},d),a.a.createElement("div",{className:"text-gray-400 px-2 py-1"},h))})))},Fe=n(143),Be=n(269),Me={},Ae={},Le="";function Re(){var e,t,n,o=Object(r.useContext)(d),l=a.a.useRef(),c=a.a.useRef(),m=a.a.useState((function(){return 0})),f=Object(u.a)(m,2),h=f[0],v=f[1],x=a.a.useState((function(){return"list"})),y=Object(u.a)(x,2),w=y[0],E=y[1],N=a.a.useState((function(){return!1})),T=Object(u.a)(N,2),j=T[0],C=T[1],D=function(e){E(e)};Object(r.useEffect)((function(){document.getElementsByTagName("details")[1]&&document.getElementsByTagName("details")[1].addEventListener("toggle",(function(e){document.getElementsByTagName("details")[1].attributes.open?C(!0):C(!1)}),!1);var e=100,t=30,n=new Fe.a.Graph,r=new Fe.a.Paper({el:document.getElementById("tdGraph"),model:n,height:270+h,width:850,gridSize:10,drawGrid:!0,restrictTranslate:!0}),a={};if(o.offlineTD)try{a=JSON.parse(o.offlineTD)}catch(E){var l=E.message;console.error(l)}if(a.links){var c=new Be.a.standard.Rectangle;c.position(100,10),c.resize(140,40),c.attr({body:{fill:"#005A9C"},label:{text:a.title,fill:"white"}}),c.set("td",{}),c.resize(12*c.attributes.attrs.label.text.length,40),n.addCell(c);for(var u=0;u<a.links.length;u++){e+=70,t+=60;var d=a.links[u].href,m=new Be.a.standard.Rectangle;m.position(e,t),m.attr({body:{fill:"#005A9C"},label:{text:d,fill:"white"}}),m.resize(12*m.attributes.attrs.label.text.length,40),n.addCell(m),m.set("href",d);var f=new Fe.b.Remove({useModelGeometry:!0,y:"0%",x:"100%",action:function(){var e=Object(s.a)(i.a.mark((function e(t,n,r){var l,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.linkedTd&&(l=o.linkedTd)[n.model.get("href")]&&(delete l[n.model.get("href")],o.updateLinkedTd(l)),c=0;case 2:if(!(c<a.links.length)){e.next=10;break}if(a.links[c].href!==n.model.get("href")){e.next=7;break}return o.removeLink(c),o.updateIsModified(!0),e.abrupt("break",10);case 7:c++,e.next=2;break;case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()}),p=new Fe.a.ToolsView({tools:[f]}),b=m.findView(r);if(b.addTools(p),o.linkedTd&&o.linkedTd[d]&&("file"===o.linkedTd[d].kind||Object.keys(o.linkedTd[d]).length)){m.set("td",o.linkedTd[d]);var x=new Fe.b.Button({markup:[{tagName:"circle",selector:"button",attributes:{r:7,fill:"#008FF5",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M -2 4 2 4 M 0 3 0 0 M -2 -1 1 -1 M -1 -4 1 -4",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],x:"0%",y:"0%",rotate:!0,action:function(){var e=Object(s.a)(i.a.mark((function e(t,n,r){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.model.get("href"),g(o,a);case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()}),y=new Fe.a.ToolsView({tools:[f,x]});b.addTools(y)}var w=new Be.a.standard.Link({attrs:{line:{stroke:"#005A9C"}},labels:[{position:.6,attrs:{text:{text:void 0===a.links[u].rel?"":a.links[u].rel,fill:"grey"}}}]});w.source(c),w.target(m),w.addTo(n)}v(t+30)}}),[h,w,o]);try{Ae=Me,Me=JSON.parse(o.offlineTD),Le=""}catch(S){Le=S.message,Me=Ae}if(!Object.keys(Me).length)return a.a.createElement("div",{className:"flex h-full w-full bg-gray-500 justify-center align-center text-center "},a.a.createElement("div",{className:"text-4xl text-white place-self-center"},'Start writing a new TD by clicking "New TD"'));if(Me){if(Me.forms)e=b(Me.forms).map((function(e,t){return a.a.createElement(V,{form:e,propName:t,key:t})}));if(Me.links)t=Me.links.map((function(e,t){return a.a.createElement(le,{link:e,propName:t,key:t})}));n=Me;var I=p(Me.id?{id:Me.id}:{},Me,["id","properties","actions","events","forms","description","title","links"]);return a.a.createElement("div",{className:"h-full w-full bg-gray-500 p-8 overflow-auto"},Le.length>0&&a.a.createElement("div",{className:"flex h-10 w-full bg-formRed rounded-md px-4 mt-2 bg-opacity-75 border-2 border-formRed"},a.a.createElement("div",{className:"flex h-6 w-16 bg-white rounded-md place-self-center justify-center"},a.a.createElement("div",{className:"text-formRed place-self-center text-center text-xs px-4"},"Error")),a.a.createElement("div",{className:" place-self-center pl-3 text-base text-white overflow-hidden"},Le)),void 0!==n&&Object.keys(n).length>0&&a.a.createElement("div",null,a.a.createElement("div",{className:"text-3xl text-white"},k(n,"title",n["@context"])),a.a.createElement(Se,I),n.description?a.a.createElement("div",{className:"text-xl text-white pt-4"},k(n,"description",n["@context"])):a.a.createElement(a.a.Fragment,null)),a.a.createElement("details",{className:"pt-8"},a.a.createElement("summary",{className:"flex justify-start items-center cursor-pointer"},a.a.createElement("div",{className:"flex flex-grow"},a.a.createElement(P,{tooltip:z()},a.a.createElement("h2",{className:"text-2xl text-white p-1 flex-grow"},"Forms"))),a.a.createElement("button",{className:"text-white font-bold text-sm bg-blue-500 cursor-pointer rounded-md p-2",onClick:function(){l.current.openModal()}},"Add Top Level Form"),a.a.createElement(O,{type:"thing",interaction:Me,ref:l})),e&&a.a.createElement("div",{className:"pt-4"},a.a.createElement("div",{className:"rounded-lg bg-gray-600 px-6 pt-4 pb-4"},e))),a.a.createElement("details",{className:"pt-8"},a.a.createElement("summary",{className:"flex justify-start items-center cursor-pointer"},a.a.createElement("div",{className:"flex flex-grow"},a.a.createElement(P,{tooltip:U()},a.a.createElement("h2",{className:"text-2xl text-white p-1 flex-grow"},"Links")),j&&a.a.createElement("button",{className:"text-white font-bold text-sm bg-blue-500 cursor-pointer rounded-md p-2 h-9",disabled:"list"===w,onClick:function(){return D("list")}},"List"),j&&a.a.createElement("button",{className:"text-white font-bold text-sm bg-blue-500 cursor-pointer rounded-md p-2 h-9",style:{marginLeft:"10px"},disabled:"graph"===w,onClick:function(){return D("graph")}},"Graph")),a.a.createElement("button",{className:"text-white font-bold text-sm bg-blue-500 cursor-pointer rounded-md p-2",onClick:function(){c.current.openModal()}},"Add Top Level Link"),a.a.createElement(M,{type:"link",interaction:Me,ref:c})),t&&"graph"===w&&a.a.createElement("div",{className:"pt-4"},a.a.createElement("div",{className:"rounded-lg bg-gray-600 px-6 pt-4 pb-4",id:"tdGraph"})),t&&"list"===w&&a.a.createElement("div",{className:"pt-4"},a.a.createElement("div",{className:"rounded-lg bg-gray-600 px-6 pt-4 pb-4"},t))),a.a.createElement(Ce,{interaction:"Properties"}),a.a.createElement(Ce,{interaction:"Actions"}),a.a.createElement(Ce,{interaction:"Events"}))}}var Je=n(286),Pe=n(392),We="https://raw.githubusercontent.com/thingweb/thingweb-playground/%40thing-description-playground/web%401.0.0/packages/playground-core/td-schema.json",_e="https://raw.githubusercontent.com/w3c/wot-thing-description/main/validation/tm-json-schema-validation.json",He={selectOnLineNumbers:!0,automaticLayout:!0,lineDecorationsWidth:20},ze=function(e){var t=Object(r.useContext)(d),n=Object(r.useState)([]),o=Object(u.a)(n,1)[0],l=Object(r.useState)(void 0),c=Object(u.a)(l,2),m=c[0],f=c[1],p=Object(r.useRef)(null),b=Object(r.useState)([]),h=Object(u.a)(b,2),v=h[0],x=h[1],y=function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.languages.json.jsonDefaults.setDiagnosticsOptions({validate:!0,enableSchemaRequest:!0,schemas:[]}),"Proxy"in window){e.next=4;break}return console.warn("Your browser doesn't support Proxies."),e.abrupt("return");case 4:n=new Proxy(o,{set:function(e,n,r,a){e[n]=r;for(var o=[We],l=0;l<e.length;l++)o.push({fileMatch:["*/*"],uri:e[l]});return t.languages.json.jsonDefaults.setDiagnosticsOptions({validate:!0,enableSchemaRequest:!0,schemas:o}),!0}}),f(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(e){m.includes(e)||m.push(e)},E=function(e){var t=m.indexOf(e);-1!==t&&m.splice(t,1)},k=function(){var e=Object(s.a)(i.a.mark((function e(t){var n,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m.includes(t)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,n=new URL(t),e.next=6,fetch(n);case 6:return r=e.sent,e.next=9,r.json();case 9:return a=e.sent,e.abrupt("return",a);case 13:e.prev=13,e.t0=e.catch(2),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(s.a)(i.a.mark((function e(n,r){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.delegateYield(i.a.mark((function e(){var r,a,o,l,c,u,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("@context"in(r=JSON.parse(n))){e.next=4;break}return m.splice(0,(void 0).state.proxy.length),e.abrupt("return",{v:void 0});case 4:if(void 0!==t.isThingModel){e.next=10;break}return t.updateIsThingModel(!1),e.next=8,k(We);case 8:e.sent&&w(We);case 10:if(a=r["@context"],!((o=r["@type"])&&o.indexOf("ThingModel")>-1)){e.next=21;break}if(t.isThingModel){e.next=19;break}return t.updateIsThingModel(!0),e.next=17,k(_e);case 17:e.sent&&(w(_e),E(We));case 19:e.next=28;break;case 21:if(!t.isThingModel){e.next=28;break}if(!(JSON.stringify(a).indexOf("https://www.w3.org/2019/wot/td/v1")>-1)){e.next=28;break}return t.updateIsThingModel(!1),e.next=26,k(We);case 26:e.sent&&(w(We),E(_e));case 28:if("string"!==typeof a){e.next=35;break}if(void 0===Pe[a]||m.includes(Pe[a])){e.next=35;break}return e.next=32,k(a);case 32:return e.sent&&w(a),e.abrupt("return",{v:void 0});case 35:if(!Array.isArray(a)){e.next=43;break}l=i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof a[t]){e.next=7;break}if(void 0===Pe[a]||m.includes(Pe[a])){e.next=7;break}return console.log("found schema for",a),e.next=5,k(a[t]);case 5:e.sent&&w(a[t]);case 7:"object"===typeof a[t]&&Object.keys(a[t]).forEach(function(){var e=Object(s.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===Pe[a[t][n]]||m.includes(Pe[a])){e.next=5;break}return e.next=3,k(Pe[a[t][n]]);case 3:e.sent&&w(Pe[a[t][n]]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 8:case"end":return e.stop()}}),e)})),c=0;case 38:if(!(c<a.length)){e.next=43;break}return e.delegateYield(l(c),"t0",40);case 40:c++,e.next=38;break;case 43:if(Array.isArray(a))for(u=function(e){var t=Object.keys(Pe).find((function(t){return Pe[t]===m[e]}));a.includes(t)||E(m[e])},d=0;d<m.length;d++)u(d);case 44:case"end":return e.stop()}}),e)}))(),"t0",2);case 2:if("object"!==typeof(a=e.t0)){e.next=5;break}return e.abrupt("return",a.v);case 5:e.next=9;break;case 7:e.prev=7,e.t1=e.catch(0);case 9:return e.prev=9,t.updateOfflineTD(n,"Editor"),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,7,9,12]])})));return function(t,n){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){function e(){return(e=Object(s.a)(i.a.mark((function e(){var n,r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{if(t.linkedTd){for(o in n=[],r=0,t.linkedTd)("file"===t.linkedTd[o].kind||Object.keys(t.linkedTd[o]).length)&&(n.push(a.a.createElement("option",{value:o,key:r},o)),r++);x(n)}}catch(l){console.error(l)}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t.linkedTd,t.offlineTD]);var O=function(){var e=Object(s.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=document.getElementById("linkedTd").value,g(t,n);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{id:"tabsBackground"},t.offlineTD&&t.linkedTd&&a.a.createElement("select",{name:"linkedTd",id:"linkedTd",className:"text-white",onChange:function(){return O()}},v)),a.a.createElement("div",{className:"w-full h-full",id:"editor"},a.a.createElement(Je.a,{options:He,theme:"vs-"+t.theme,language:"json",ref:p,value:t.offlineTD,editorWillMount:y,editorDidMount:function(e,t){e.onDidChangeModelDecorations((function(){var t=e.getModel();null!==t&&t.getModeId()}))},onChange:function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})))},Ue=n(284),Ge=n.n(Ue),Ke=n(285),Ve=n.n(Ke);function qe(e){return a.a.createElement("button",{onClick:e.onClick,className:" flex bg-blue-400                  hover:bg-blue-300  text-white  font-bold  py-2 px-5  rounded  h-12 text-center  cursor-pointer justify-center "},a.a.createElement("div",{className:"place-self-center"},e.children))}var Ye=Object(r.forwardRef)((function(e,t){var n=Object(r.useContext)(d),o=a.a.useState((function(){return!1})),c=Object(u.a)(o,2),i=c[0],s=c[1];Object(r.useEffect)((function(){!0===i&&($e(Ze(n.offlineTD)),Qe())}),[i,n]),Object(r.useImperativeHandle)(t,(function(){return{openModal:function(){return m()},close:function(){return f()}}}));var m=function(){s(!0)},f=function(){s(!1)},p=Xe(n.offlineTD);return i?l.a.createPortal(a.a.createElement(N,{onCancel:f,cancelText:"Close",hasSubmit:!1,children:p,title:"Share This TD",description:"A link to this TD was copied to your clipboard."}),document.getElementById("modal-root")):null})),Ze=function(e){var t={};try{t=JSON.parse(e)}catch(n){}return"".concat(window.location.origin+window.location.pathname,"?td=").concat(encodeURIComponent(JSON.stringify(t)))},Xe=function(e){return a.a.createElement("input",{type:"text",name:"share-td-field",id:"share-td-field",className:"border-gray-600 bg-gray-600 w-full p-2 sm:text-sm border-2 text-white rounded-md focus:outline-none focus:border-blue-500",defaultValue:Ze(e)})},$e=function(e){document.hasFocus()&&navigator.clipboard.writeText(e).then((function(){console.log("Async: Copied TD link to clipboard!")}),(function(e){console.error("Async: Could not copy TD to clipboard: ",e)}))},Qe=function(){setTimeout((function(){try{document.getElementById("share-td-field").select()}catch(e){}}),250)},et=Object(r.forwardRef)((function(e,t){var n=Object(r.useContext)(d),o=a.a.useState([]),c=Object(u.a)(o,2),i=c[0],s=c[1],m=a.a.useState((function(){return!1})),f=Object(u.a)(m,2),p=f[0],b=f[1];Object(r.useEffect)((function(){s(tt(n.offlineTD))}),[n]),Object(r.useImperativeHandle)(t,(function(){return{openModal:function(){return h()},close:function(){return v()}}}));var h=function(){b(!0)},v=function(){b(!1)};return p?l.a.createPortal(a.a.createElement(N,{onCancel:v,onSubmit:function(){return nt(n.offlineTD,i)},submitText:"Generate TD",children:i,title:"Generate TD From TM",description:"Please provide values to switch the placeholders with."}),document.getElementById("modal-root")):null})),tt=function(e){try{for(var t,n=/{{/gi,r=[];t=n.exec(e);)r.push(t.index);n=/}}/gi;for(var o=[];t=n.exec(e);)o.push(t.index);for(var l=[],c=0;c<r.length;c++)l.push(e.slice(r[c]+2,o[c]));var i=(l=Object(De.a)(new Set(l))).map((function(e){return a.a.createElement("div",{key:e,className:"py-1"},a.a.createElement("label",{htmlFor:e,className:"text-sm text-gray-400 font-medium pl-2"},e,":"),a.a.createElement("input",{type:"text",name:e,id:e,className:"border-gray-600 bg-gray-600 w-full p-2 sm:text-sm border-2 text-white rounded-md focus:outline-none focus:border-blue-500",placeholder:"Enter a value..."}))})),s=[],u=[],d=[];try{var f=function(e,t){return t.map((function(t){var n=x[e].includes(t);return a.a.createElement("div",{key:"".concat(e,"/").concat(t),className:"form-checkbox py-1 pl-2"},a.a.createElement("input",{id:"".concat(e,"/").concat(t),className:"form-checkbox-input",type:"checkbox",value:"#".concat(e,"/").concat(t),disabled:n,defaultChecked:!0,title:n?"This field is required by the TM.":"","data-interaction":e}),a.a.createElement("label",{className:"form-checkbox-label pl-2",htmlFor:"".concat(e,"/").concat(t)},"#".concat(e,"/").concat(t)))}))},p=JSON.parse(e),b=Object.keys(p.properties?p.properties:{}),h=Object.keys(p.actions?p.actions:{}),v=Object.keys(p.events?p.events:{}),x={properties:[],actions:[],events:[]};if(p["tm:required"]){var g,y=Object(m.a)(p["tm:required"]);try{for(y.s();!(g=y.n()).done;){var w=g.value;w.startsWith("#properties/")?x.properties.push(w.split("/")[1]):w.startsWith("#actions/")?x.actions.push(w.split("/")[1]):w.startsWith("#events/")&&x.events.push(w.split("/")[1])}}catch(k){y.e(k)}finally{y.f()}}s=f("properties",b),u=f("actions",h),d=f("events",v)}catch(N){}var E=a.a.createElement("h2",{key:"modalDividerText",className:"text-gray-400 pb-2 pt-4"},"Also, select/unselect the interaction affordances you would like to see in the new TD.");return[].concat(Object(De.a)(i),[E],Object(De.a)(s),Object(De.a)(u),Object(De.a)(d))}catch(O){return console.log(O),[]}},nt=function(e,t){var n,r={},a=[],o=[],l=[],c=Object(m.a)(t);try{for(c.s();!(n=c.n()).done;){var i=n.value;i.props.className.indexOf("form-checkbox")>-1&&document.getElementById(i.props.children[0].props.id).checked&&("properties"===i.props.children[0].props["data-interaction"]?a.push(i.key.split("/")[1]):"actions"===i.props.children[0].props["data-interaction"]?o.push(i.key.split("/")[1]):"events"===i.props.children[0].props["data-interaction"]&&l.push(i.key.split("/")[1]))}}catch(b){c.e(b)}finally{c.f()}(t=t.filter((function(e){return-1===e.props.className.indexOf("form-checkbox")&&"modalDividerText"!==e.key}))).forEach((function(e){var t=document.getElementById(e.key);return r[e.key]=t.value,t.value})),Object.keys(r).forEach((function(t){e=e.split("{{".concat(t,"}}")).join(r[t])}));var s=JSON.parse(e);if(s.properties){var u=Object.keys(s.properties).filter((function(e){return a.includes(e)})).reduce((function(e,t){return e[t]=s.properties[t],e}),{});s.properties=u}if(s.actions){var d=Object.keys(s.actions).filter((function(e){return o.includes(e)})).reduce((function(e,t){return e[t]=s.actions[t],e}),{});s.actions=d}if(s.events){var f=Object.keys(s.events).filter((function(e){return l.includes(e)})).reduce((function(e,t){return e[t]=s.events[t],e}),{});s.events=f}delete s["@type"],delete s["tm:required"];var p="".concat(window.location.origin+window.location.pathname,"?td=").concat(encodeURIComponent(JSON.stringify(s)));window.open(p,"_blank")},rt=Object(r.forwardRef)((function(e,t){var n=Object(r.useContext)(d),o=a.a.useState((function(){return!1})),c=Object(u.a)(o,2),i=c[0],s=c[1],m=a.a.useState("TD"),f=Object(u.a)(m,2),p=f[0],b=f[1];Object(r.useImperativeHandle)(t,(function(){return{openModal:function(){return h()},close:function(){return v()}}}));var h=function(){s(!0)},v=function(){s(!1)},x=at((function(e){b(e.target.value)}),(function(){return p}));return i?l.a.createPortal(a.a.createElement(N,{onCancel:v,onSubmit:function(){var e=lt(p),t={};t[e.title]=e,n.updateLinkedTd(void 0),n.addLinkedTd(t),n.updateShowConvertBtn("TM"===p),n.updateOfflineTD(JSON.stringify(e,null,"\t"),"AppHeader"),v()},children:x,submitText:"TD"===p?"Create TD":"Create TM",title:"Create a New TD/TM",description:"To quickly create a basis for your new Thing Description/Thing Model just fill out this little template and we'll get you going."}),document.getElementById("modal-root")):null})),at=function(e,t){return a.a.createElement(a.a.Fragment,null,a.a.createElement("label",{htmlFor:"type",className:"text-sm text-gray-400 font-medium pl-2"},"Type:"),a.a.createElement("div",{className:"relative"},a.a.createElement("select",{className:"block appearance-none w-full bg-gray-600 border-2 border-gray-600 text-white py-3 px-4 pr-8 rounded leading-tight focus:border-blue-500 focus:outline-none",id:"type",onChange:e,value:t()},a.a.createElement("option",{value:"TD"},"Thing Description"),a.a.createElement("option",{value:"TM"},"Thing Model")),a.a.createElement("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},a.a.createElement(ce.a,{color:"#cacaca"}))),ot("ID","urn:thing-id","thing-id","url","autoFocus"),ot("Title","Thing Title","thing-title","text"),ot("Base","http://www.example.com/thing-path","thing-base","url"),a.a.createElement("label",{htmlFor:"thing-description",className:"text-sm text-gray-400 font-medium pl-2"},"Description:"),a.a.createElement("textarea",{id:"thing-description",rows:"5",className:"bg-gray-600 sm:text-sm appearance-none  border-2 border-gray-600 rounded w-full  p-2 text-white  leading-tight  focus:outline-none  focus:border-blue-500",placeholder:"A short description about this new Thing..."}),a.a.createElement("label",{htmlFor:"thing-security",className:"text-sm text-gray-400 font-medium pl-2"},"Security:"),a.a.createElement("div",{className:"relative"},a.a.createElement("select",{className:"block appearance-none w-full bg-gray-600 border-2 border-gray-600 text-white py-3 px-4 pr-8 rounded leading-tight focus:border-blue-500 focus:outline-none",id:"thing-security"},a.a.createElement("option",null,"nosec"),a.a.createElement("option",null,"basic"),a.a.createElement("option",null,"digest"),a.a.createElement("option",null,"bearer"),a.a.createElement("option",null,"psk"),a.a.createElement("option",null,"oauth2"),a.a.createElement("option",null,"apikey")),a.a.createElement("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},a.a.createElement(ce.a,{color:"#cacaca"}))))},ot=function(e,t,n,r,o){return a.a.createElement("div",{key:n,className:"py-1"},a.a.createElement("label",{htmlFor:n,className:"text-sm text-gray-400 font-medium pl-2"},e,":"),a.a.createElement("input",{name:n,id:n,className:"border-gray-600 bg-gray-600 w-full p-2 sm:text-sm border-2 text-white rounded-md focus:outline-none focus:border-blue-500",placeholder:t,type:r,autoFocus:"autoFocus"===o}))},lt=function(e){var t=document.getElementById("thing-id").value,n=document.getElementById("thing-title").value,r=document.getElementById("thing-base").value,a=document.getElementById("thing-description").value,o=document.getElementById("thing-security").value,l={"@context":"https://www.w3.org/2019/wot/td/v1"};l.title=""!==n?n:"ediTDor Thing","TM"===e&&(l["@type"]="tm:ThingModel"),""!==t&&(l.id=""!==t?t:"urn:editdor-thing-id"),""!==r&&(l.base=""!==r?r:"/"),""!==a&&(l.description=a);var c={};return c["".concat(o,"_sc")]={scheme:o},l.securityDefinitions=c,l.security="".concat(o,"_sc"),l.properties={},l.actions={},l.events={},l};function ct(){var e=Object(r.useContext)(d),t=Object(r.useCallback)((function(){return"chooseFileSystemEntries"in window||"showOpenFilePicker"in window}),[]),n=Object(r.useCallback)(Object(s.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isModified){t.next=2;break}return t.abrupt("return",!0);case 2:return"Discard changes? All changes you made to your TD will be lost.",t.next=5,window.confirm("Discard changes? All changes you made to your TD will be lost.");case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)}))),[e.isModified]),o=Object(r.useCallback)((function(e){return e.text?e.text():E(e)}),[]),l=Object(r.useCallback)(function(){var t=Object(s.a)(i.a.mark((function t(n,r){var a,l,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o(n);case 3:a=t.sent,(l={})["./"+n.name]=void 0!==r?r:JSON.parse(a),e.updateLinkedTd(void 0),e.addLinkedTd(l),e.updateOfflineTD(a),e.setFileHandle(r||n.name),e.updateIsModified(!1),t.next=18;break;case 13:t.prev=13,t.t0=t.catch(0),c="An error occured reading ".concat(e.offlineTD),console.error(c,t.t0),alert(c);case 18:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,n){return t.apply(this,arguments)}}(),[e,o]),c=Object(r.useCallback)(function(){var e=Object(s.a)(i.a.mark((function e(r){var a,o,c,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:if(t()){e.next=12;break}return e.next=7,w();case 7:if(!(a=e.sent)){e.next=11;break}return e.next=11,l(a);case 11:return e.abrupt("return");case 12:return e.prev=12,e.next=15,y();case 15:return o=e.sent,e.next=18,o.getFile();case 18:return c=e.sent,e.next=21,l(c,o);case 21:e.next=28;break;case 23:e.prev=23,e.t0=e.catch(12),s="We ran into an error trying to open your TD.",console.error(s,e.t0),alert(s);case 28:case"end":return e.stop()}}),e,null,[[12,23]])})));return function(t){return e.apply(this,arguments)}}(),[l,n,t]),u=Object(r.useCallback)(function(){var t=Object(s.a)(i.a.mark((function t(n,r){var a,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.createWriter){t.next=9;break}return t.next=3,n.createWriter();case 3:return a=t.sent,t.next=6,a.write(0,r);case 6:return t.next=8,a.close();case 8:return t.abrupt("return");case 9:return t.next=11,n.createWritable();case 11:return o=t.sent,t.next=14,o.write(r);case 14:return t.next=16,o.close();case 16:setTimeout((function(){e.updateOfflineTD(r,"AppHEader"),e.updateIsModified(!1)}),500);case 17:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),[e]),m=Object(r.useCallback)((function(e,t){var n,r=document.getElementById("aDownload"),a={};try{n=(n=(a=JSON.parse(t)).id||a.title).replace(/\s/g,"")+".jsonld"}catch(l){console.error(l)}e=e||n;var o=new File([t],"",{type:"application/ld+json"});r.href=window.URL.createObjectURL(o),r.setAttribute("download",e),r.click()}),[]),f=Object(r.useCallback)(Object(s.a)(i.a.mark((function n(){var r,a,o,l,c;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t()){n.next=3;break}return m(e.name,e.offlineTD),n.abrupt("return");case 3:return n.prev=3,n.next=6,b();case 6:r=n.sent,n.next=14;break;case 9:return n.prev=9,n.t0=n.catch(3),a="We ran into an error trying to save your TD.",console.error(a,n.t0),n.abrupt("return",alert(a));case 14:return n.prev=14,n.next=17,u(r,e.offlineTD);case 17:document.getElementById("linkedTd")&&(o=document.getElementById("linkedTd").value,"object"!==typeof e.fileHandle&&((l=e.linkedTd)[o]=r,e.updateLinkedTd(l))),e.setFileHandle(r),e.updateIsModified(!1),n.next=27;break;case 22:n.prev=22,n.t1=n.catch(14),c="Unfortunately we were unable to save your TD.",console.error(c,n.t1),alert(c);case 27:case"end":return n.stop()}}),n,null,[[3,9],[14,22]])}))),[m,t,e,u]),p=Object(r.useCallback)(Object(s.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e.fileHandle){t.next=5;break}return t.next=4,f();case 4:return t.abrupt("return",t.sent);case 5:return t.next=7,u(e.fileHandle,e.offlineTD);case 7:alert("File saved"),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(0),n="Unfortunately we were unable to save your TD.",console.error(n,t.t0),alert(n);case 15:case"end":return t.stop()}}),t,null,[[0,10]])}))),[e,f,u]),b=function(){var e=Object(s.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("showSaveFilePicker"in window)){e.next=5;break}return t={types:[{description:"Thing Description",accept:{"application/ld+json":[".jsonld",".json"]}}]},e.next=4,window.showSaveFilePicker(t);case 4:return e.abrupt("return",e.sent);case 5:return n={type:"save-file",accepts:[{description:"Thing Description",extensions:[".jsonld",".json"],mimeTypes:["application/ld+json"]}]},e.next=8,window.chooseFileSystemEntries(n);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){if(window.location.search.indexOf("td")>-1){var t=new URL(window.location.href).searchParams.get("td");try{var n=JSON.parse(t);"tm:ThingModel"===n["@type"]&&e.updateIsThingModel(!0),e.updateOfflineTD(JSON.stringify(n,null,2))}catch(r){alert("Sorry, we were unable to parse the TD given in the URL")}}}),[]),Object(r.useEffect)((function(){var e=function(e){(window.navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&"s"===e.key&&(e.preventDefault(),e.stopPropagation(),p()),(window.navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&"o"===e.key&&(e.preventDefault(),e.stopPropagation(),c()),(window.navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&"n"===e.key&&(e.preventDefault(),e.stopPropagation(),g())};return document.addEventListener("keydown",e,!1),window.onbeforeunload=function(e){var t="Important: Please click on 'Save' button to leave this page.";return"undefined"==typeof e&&(e=window.event),e&&(e.returnValue=t),t},function(){document.removeEventListener("keydown",e,!1)}}),[c,p,e]);var h=a.a.useRef(),v=a.a.useRef(),x=a.a.useRef(),g=function(){x.current.openModal()};return a.a.createElement(a.a.Fragment,null,a.a.createElement("header",{className:"flex justify-between items-center h-16 bg-blue-500"},a.a.createElement("div",{className:"flex items-center"},a.a.createElement("img",{className:"pl-2 h-12",src:Ve.a,alt:"WOT"}),a.a.createElement("div",{className:"w-2"}),a.a.createElement("button",null,a.a.createElement("img",{className:"pl-2 h-8",src:Ge.a,alt:"LOGO",onClick:function(){return window.open("https://eclipse.github.io/editdor/","_blank")}}))),a.a.createElement("div",{className:"flex space-x-2 pr-2"},a.a.createElement(qe,{onClick:function(){v.current.openModal()}},"Share"),a.a.createElement(qe,{onClick:g},"New"),a.a.createElement(qe,{onClick:c},"Open"),t()&&a.a.createElement(qe,{onClick:p},"Save"),a.a.createElement(qe,{onClick:f},"Save As"),(e.showConvertBtn||e.isThingModel)&&a.a.createElement(qe,{onClick:function(){h.current.openModal()}},"Convert To TD"))),a.a.createElement(et,{ref:h}),a.a.createElement(Ye,{ref:v}),a.a.createElement(rt,{ref:x}),a.a.createElement("input",{className:"h-0",type:"file",id:"fileInput",style:{display:"none"}}),a.a.createElement("a",{className:"h-0",id:"aDownload",href:"/",style:{display:"none"}},"download"))}var it=function(e){var t,n=Object(r.useContext)(d),o=0,l=0,c=0,i=0;try{var s=JSON.parse(n.offlineTD),u=(new TextEncoder).encode(JSON.stringify(s)).length;o=(t=u)<1024?t+" bytes":t<1048576?(t/1024).toFixed(3)+" KiB":t<1073741824?(t/1048576).toFixed(3)+" MiB":(t/1073741824).toFixed(3)+" GiB",l=s.properties?Object.keys(s.properties).length:0,c=s.properties?Object.keys(s.actions).length:0,i=s.properties?Object.keys(s.events).length:0}catch(m){}return a.a.createElement(a.a.Fragment,null,a.a.createElement("footer",{className:"bg-blue-500 h-8 flex flex-col items-center justify-center text-white"},a.a.createElement("div",{className:"flex flex-row items-center justify-start w-full"},a.a.createElement("div",{className:"mx-2"},"Properties: ",l),a.a.createElement("div",{className:"mx-2"},"Actions: ",c),a.a.createElement("div",{className:"mx-2"},"Events: ",i),a.a.createElement("div",{className:"mx-2 flex-grow"},"Size: ",o),a.a.createElement("div",{className:"mx-2 justify-self-end"},"Version: ","0.4.0"," | ",a.a.createElement("u",null,a.a.createElement("a",{href:"https://github.com/eclipse/editdor",target:"_blank",rel:"noopener noreferrer"},"We are on GitHub"))))))},st="UPDATE_OFFLINE_TD",ut="UPDATE_IS_MODFIED",dt="UPDATE_IS_THINGMODEL",mt="SET_FILE_HANDLE",ft="REMOVE_FORM_FROM_TD",pt="REMOVE_LINK_FROM_TD",bt="ADD_PROPERTYFORM_TO_TD",ht="ADD_ACTIONFORM_TO_TD",vt="ADD_EVENTFORM_TO_TD",xt="REMOVE_ONE_OF_A_KIND_FROM_TD",gt="UPDATE_SHOW_CONVERT_BTN",yt="ADD_LINKED_TD",wt="UPDATE_LINKED_TD",Et=function(e,t){switch(t.type){case st:return function(e,t){var n=t.linkedTd;try{if(n){if(n&&"object"!==typeof t.fileHandle){var r=JSON.parse(e);if(document.getElementById("linkedTd")){var a=document.getElementById("linkedTd").value;""===a?n[r.title||"ediTDor Thing"]=r:n[a]=r}}}else{var o=JSON.parse(e);(n={})[o.title||"ediTDor Thing"]=o}}catch(c){var l=c.message;console.log(l)}return Object(f.a)(Object(f.a)({},t),{},{offlineTD:e,isModified:!0,linkedTd:n})}(t.offlineTD,e);case ut:return function(e,t){return Object(f.a)(Object(f.a)({},t),{},{isModified:e})}(t.isModified,e);case dt:return function(e,t){return Object(f.a)(Object(f.a)({},t),{},{isThingModel:e})}(t.isThingModel,e);case mt:return function(e,t){return Object(f.a)(Object(f.a)({},t),{},{fileHandle:e})}(t.fileHandle,e);case ft:return function(e,t){var n=JSON.parse(t.offlineTD);if(console.log(e),"forms"===e.type)n.forms.forEach((function(t,r){"string"===typeof t.op?n.forms.splice(r,1):(t.href===e.form.href&&-1!==t.op.indexOf(e.form.op)&&t.op.splice(t.op.indexOf(e.form.op),1),0===t.op.length&&n.forms.splice(r,1))}));else try{n[e.type][e.propName].forms.forEach((function(t,r){"string"===typeof t.op?t.href===e.form.href&&n[e.type][e.propName].forms.splice(r,1):(t.href===e.form.href&&-1!==t.op.indexOf(e.form.op)&&t.op.splice(t.op.indexOf(e.form.op),1),0===t.op.length&&n[e.type][e.propName].forms.splice(r,1))}))}catch(r){alert("Sorry we were unable to delete the Form.")}return Object(f.a)(Object(f.a)({},t),{},{offlineTD:JSON.stringify(n,null,2)})}(t.form,e);case pt:return function(e,t){var n=JSON.parse(t.offlineTD);try{n.links.splice(e,1)}catch(o){alert("Sorry we were unable to delete the Link.")}var r=t.linkedTd;if(r&&"object"!==typeof t.fileHandle&&document.getElementById("linkedTd")){var a=document.getElementById("linkedTd").value;""===a?r[n.title||"ediTDor Thing"]=n:r[a]=n}return Object(f.a)(Object(f.a)({},t),{},{offlineTD:JSON.stringify(n,null,2),linkedTd:r})}(t.link,e);case xt:return function(e,t,n){var r=JSON.parse(n.offlineTD);try{delete r[e][t]}catch(a){alert("Sorry we were unable to delete the Form.")}return Object(f.a)(Object(f.a)({},n),{},{offlineTD:JSON.stringify(r,null,2)})}(t.kind,t.oneOfAKindName,e);case bt:return function(e,t){var n=JSON.parse(t.offlineTD),r=n.properties[e.propName];return void 0===r.forms&&(r.forms=[]),r.forms.push(e.form),Object(f.a)(Object(f.a)({},t),{},{offlineTD:JSON.stringify(n,null,2)})}(t.form,e);case ht:return function(e,t){var n=JSON.parse(t.offlineTD),r=n.actions[e.actionName];return console.log("ActionForms",r.forms),void 0===r.forms&&(r.forms=[]),r.forms.push(e.form),Object(f.a)(Object(f.a)({},t),{},{offlineTD:JSON.stringify(n,null,2)})}(t.params,e);case vt:return function(e,t){var n=JSON.parse(t.offlineTD),r=n.events[e.eventName];return void 0===r.forms&&(r.forms=[]),r.forms.push(e.form),Object(f.a)(Object(f.a)({},t),{},{offlineTD:JSON.stringify(n,null,2)})}(t.params,e);case gt:return function(e,t){return Object(f.a)(Object(f.a)({},t),{},{showConvertBtn:e})}(t.showConvertBtn,e);case yt:return function(e,t){var n={},r=t.linkedTd;return n=void 0===r?e:Object.assign(r,e),Object(f.a)(Object(f.a)({},t),{},{linkedTd:n})}(t.linkedTd,e);case wt:return function(e,t){return Object(f.a)(Object(f.a)({},t),{},{linkedTd:e})}(t.linkedTd,e);default:return e}},kt=function(e){var t=Object(r.useReducer)(Et,{offlineTD:"",theme:"dark"}),n=Object(u.a)(t,2),o=n[0],l=n[1];return a.a.createElement(d.Provider,{value:{offlineTD:o.offlineTD,theme:o.theme,isModified:o.isModified,isThingModel:o.isThingModel,name:o.name,fileHandle:o.fileHandle,showConvertBtn:o.showConvertBtn,linkedTd:o.linkedTd,updateOfflineTD:function(e,t){l({type:st,offlineTD:e})},updateIsModified:function(e){l({type:ut,isModified:e})},updateIsThingModel:function(e){l({type:dt,isThingModel:e})},setFileHandle:function(e){l({type:mt,fileHandle:e})},removeForm:function(e){l({type:ft,form:e})},removeLink:function(e){l({type:pt,link:e})},addForm:function(e){l({type:bt,form:e})},addActionForm:function(e){l({type:ht,params:e})},addEventForm:function(e){l({type:vt,params:e})},removeOneOfAKindReducer:function(e,t){l({type:xt,kind:e,oneOfAKindName:t})},updateShowConvertBtn:function(e){l({type:gt,showConvertBtn:e})},addLinkedTd:function(e){l({type:yt,linkedTd:e})},updateLinkedTd:function(e){l({type:wt,linkedTd:e})}}},e.children)},Nt=function(e,t){var n,r=document.getElementById("first"),a=document.getElementById("second"),o=function(o){var l={x:o.clientX-n.e.clientX,y:o.clientY-n.e.clientY};"H"===t&&(l.x=Math.min(Math.max(l.x,-n.firstWidth),n.secondWidth),e.style.left=n.offsetLeft+l.x+"px",r.style.width=n.firstWidth+l.x+"px",a.style.width=n.secondWidth-l.x+"px")};e.onmousedown=function(t){n={e:t,offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,firstWidth:r.offsetWidth,secondWidth:a.offsetWidth},document.onmousemove=o,document.onmouseup=function(){document.onmousemove=document.onmouseup=null}}},Ot=function(e){return Object(r.useEffect)((function(){Nt(document.getElementById("separator"),"H")}),[e]),a.a.createElement(kt,null,a.a.createElement("main",{className:"h-full w-screen flex flex-col"},a.a.createElement(ct,null),a.a.createElement("div",{className:"flex-grow splitter flex flex-row w-full height-adjust"},a.a.createElement("div",{className:"w-5/12",id:"first"},a.a.createElement(ze,null)),a.a.createElement("div",{id:"separator"}),a.a.createElement("div",{className:"w-7/12",id:"second"},a.a.createElement(Re,null))),a.a.createElement(it,null),a.a.createElement("div",{id:"modal-root"})))},Tt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function jt(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}n(393).patch(),l.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(Ot,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/editdor",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/editdor","/service-worker.js");Tt?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):jt(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):jt(t,e)}))}}()}},[[290,1,2]]]);
//# sourceMappingURL=main.df434a00.chunk.js.map